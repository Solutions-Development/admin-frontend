<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="/styles/dashboard.css">
    <title>Panel de Creacion de Eventos</title>
  </head>
  <body>
    <nav class="navbar navbar-light bg-light">
        <a href="dashboard.html"><ion-icon class="arrows" name="arrow-back"></ion-icon>Volver</a>
        <a class="navbar-brand" href="#">
          Crear Evento | <%= user %>
        </a>
        <a href="docs.html">Ver Documentacion<ion-icon class="arrows" name="arrow-forward"></ion-icon></a>
    </nav>
    <div class="dashboard-container">
        <div class="card">
            <div class="card-header">Creacion de Eventos</div>
            <div class="card-body">
                <form method="POST" action="http://eventos.solutions.com.do/test">
                    <div class="form-row">
                      <div class="form-group col-md-12">
                        <label>Nombre Evento</label>
                        <input required type="text" name="nombre" class="form-control" placeholder="XVI Evento de Ortopedia">
                      </div>
                      <div class="form-group col-md-6">
                        <label>Fecha Inicio Evento</label>
                        <input required type="date" name="fecha_inicio" class="form-control">
                      </div>
                      <div class="form-group col-md-6">
                        <label>Fecha Termino Evento</label>
                        <input required type="date" name="fecha_termino" class="form-control">
                      </div>
                    </div>
                    <div class="form-group">
                      <label for="inputAddress">Provincia/Ciudad</label>
                      <input required type="text" name="ciudad" class="form-control" id="inputAddress" placeholder="Provincia/Ciudad">
                    </div>
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label for="inputCity">País</label>
                        <input required type="text" name="pais" class="form-control" id="inputCity" placeholder="Republica Dominicana">
                      </div>
                      <div class="form-group col-md-4">
                        <label for="inputZip">Direccion</label>
                        <input required type="text" name="direccion" class="form-control" id="inputZip" placeholder="Hotel Barcelo #16">
                      </div>
                      <div class="form-group col-md-2">
                        <label for="inputState">Sede</label>
                        <select required id="inputState" name="sede" class="form-control">
                          
                        </select>
                      </div>
                    </div>
                    
                    <div class="form-group text-center">
                      <label>Banner del Evento</label>
                      <img src="https://placehold.it/920x200" class="card-img-top" id="img_banner" alt="banner" width="920" height="250">
                      <input class="btn" type='file' id="banner" name="banner" />
                      <hr>
                    </div>
                    <script>
                    function uploadFile() {
                    var blobFile = $('#banner').files[0];
                    var formData = new FormData();
                    formData.append("fileToUpload", blobFile);

                    $.ajax({
                    url: "http://eventos.solutions.com.do/test",
                    type: "POST",
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function(response) {
                    },
                    error: function(jqXHR, textStatus, errorMessage) {
                   console.log(errorMessage); // Optional
                    }
                   });
                   document.getElementById("hiddenSubmit").click();
                  }
                    </script>
                    <div class="form-group">
                      
                      <label>Seleccionar Iconografía</label>
                      <div class="row" style="margin: 10px;">
                        <div class="col">
                            <div class="card justify-content-center">
                                <div class="card-header">Paquete #1</div>
                                <div class="card-body" style="margin: 10px;">
                                    <input class="form-check-input" type="radio" name="iconografia" id="exampleRadios1" value="option1">
                                    <label class="form-check-label" for="exampleRadios1">
                                        Seleccionar
                                    </label>
                                    <hr>
                                    <img src="./assets/paquete1.png" alt="img" class="card-img-top">
                                </div>
                          </div>
                        </div>
                        <div class="col">
                            <div class="card justify-content-center">
                                <div class="card-header">Paquete #2</div>
                                <div class="card-body" style="margin: 10px;">
                                    <input required class="form-check-input" type="radio" name="iconografia" id="exampleRadios2" value="option2">
                                    <label class="form-check-label" for="exampleRadios2">
                                        Seleccionar
                                    </label>
                                    <hr>
                                    <img src="./assets/paquete2.png" alt="img" class="card-img-top">
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card justify-content-center">
                              <div class="card-header">Paquete #3</div>
                              <div class="card-body" style="margin: 10px;">
                                  <input required class="form-check-input" type="radio" name="iconografia" id="exampleRadios3" value="option3">
                                  <label class="form-check-label" for="exampleRadios3">
                                      Seleccionar
                                  </label>
                                  <hr>
                                  <img src="./assets/paquete3.png" alt="img" class="card-img-top">
                              </div>
                          </div>
                        </div>
                        <br>
                    </div>
                  
                    <br>
                    <div class="card" style="padding: 20px;">
                      <h4 style="text-align: center;">Mapa del Evento</h4>
                      <hr>
                      <div class="form-row">
                        <div class="form-group col-md-6">
                          <label>Subir Imagen</label>
                          <input class="btn" type='file' id="map" name="mapa" value=`this.src`/>
                        </div>
                        <div class="form-group col-md-6">
                          <img src="https://placehold.it/920x200" class="card-img-top" id="img_map" alt="map" width="400" height="200">
                        </div>
                      </div>
                    </div>
                    <button type="submit" style="visibility: hidden" id="hiddenSubmit"></button>
                    <button type="button" onclick="uploadFile()" class="btn btn-outline-info">Enviar</button>
                    </form>
                  </div>
                <br>
                
        </div>
    </div>
    <script>
      window.addEventListener('load', function() {
        document.querySelector('input#banner').addEventListener('change', function() {
            if (this.files && this.files[0]) {
                var img = document.getElementById('img_banner') // $('img')[0]
                img.src = URL.createObjectURL(this.files[0]); // set src to blob url
                img.value = img.src
            }
        });
      });

      window.addEventListener('load', function() {
        document.querySelector('input#map').addEventListener('change', function() {
            if (this.files && this.files[0]) {
                var img = document.getElementById('img_map') // $('img')[0]
                img.src = URL.createObjectURL(this.files[0]); // set src to blob url
            }
        });
      });

      window.addEventListener('load', function() {
        document.querySelector('input#sponsor1').addEventListener('change', function() {
            if (this.files && this.files[0]) {
                var img = document.getElementById('img_sponsor1') // $('img')[0]
                img.src = URL.createObjectURL(this.files[0]); // set src to blob url
            }
        });
      });

      window.addEventListener('load', function() {
        document.querySelector('input#sponsor2').addEventListener('change', function() {
            if (this.files && this.files[0]) {
                var img = document.getElementById('img_sponsor2') // $('img')[0]
                img.src = URL.createObjectURL(this.files[0]); // set src to blob url
            }
        });
      });
      async function search() {
let select = document.querySelector("#inputState")
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        const parsed = JSON.parse(xhttp.response);
        var sedes = [];
        for (var i = 0; i < parsed.length; i++){
            sedes.push(parsed[i].nombre)
            console.log(sedes);
      }
      for (let elt of sedes){
          let option = document.createElement("option");
          option.text = elt;
          option.value = elt;
          select.appendChild(option);
      }
    }
  }
xhttp.open("GET", "https://api.sistemasolutions.tech/sede", true);
xhttp.send();
}
search()
    </script>
    <footer class="page-footer font-small bg-light">
      <div class=" text-center py-3">Interfaz Administrativa 2020 &copy; | <a href="docs.html">Desea ver las instrucciones?</a></a>
      </div>
    </footer>
    <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  </body>
</html>
